language: python

cache:
  pip: true
  directories:
    - "$HOME/.cache/pip"

env:
  global:
  - secure: 0h/ostDefrrg635lQswimLZHfFJcSmzUPP3fZDFT6OoTrX69b0/McKK0vr67MIIbn0YWjiyUL7oEh+uAg4I9pmNx+/n2OGkDGpf0Z3M6UgAwXztS2XvABO4r73l1vW1LykrX++ORfLgzsk2l368/cFGeN3rkBGU2vHADeJUQ1vmcD+W6o8DGf4SiRoU5wlDzgqbK2O7ofscupSL2xM20n2VhbLQasGUicQGuacEXd4tFRZhscanjeNTRPUWZGJhu/2EYLbymVysRPni+Ad40QFHog6xAgbWbvXT4FsFg4ryLfYfH0fFDopkhcGakX7ryF/ZqNfrE3MQbzkjpGQnTXpqvLxOzINf2nJ1U1h6e/DjBKdWUoi59ocoOBkyPqveqOvO20Su+YgNBXAk8JZ5obEJMbeAB07UyM5kzzWwl397J+liKOIwX3Yf5hocif+B/KL6YhqZkYp3/2F5MWhgKf07x2D2voF/TfZZJ0B3N/UQGCbORASsES5X5Psf7kK2a5hT/0iKU1nJXy63ty4bC4ctjEpchyQp90QqXQRhCSAptGjPPYZAueNaJB5R5cjQnoXu90vLdkMGllYU38NV2FX/gfRVlh5jo4rVhN+wYAD4b5KLIaFju/WDzqqs7IfQ3UpF8yhFc+y7asCGMlEzTw+wRrozIAnrLt8YA1kUt9Lo=
  - secure: wPmdO3EBkUWBVIqLSDmq2xPZuqG4JcUttqVidOJzb+e5ZvFZOsEDnIHb0/80dzIQ2Qiu/jrAQRhokpc/4GIbWue2IxwBs0hg5hxo1Ox/ZvnpVpYnOyShDUWF9hcpw+pMyL+dfI7wE/VXqE/FSUpR57DYwMQbGBszXWY4gK3D+h/j2TJ3m5J1Bz23KvRMCaE0QQ3mF/ZFKeL8cpj6e0A67D5HWgk02SZxz1yGtCxJZ46yVq4TFKibh612YvvGtF0ISG6EK7iYy59+muV2lljjeyt0QcZrpqGoxA5sdM+7Q4GavYCuYaZ9H54molOMMv9MlLUYchFmsSZOPqaaImSWonapMYB1SIE8beAQ2eMeD543fkapWKGhY+UMWKM5ezvE7kFPTux22x+P/tWlWJFE8pEVgWkEEZXhRrb8qk8Bh1BrFBIbBzVG0dcZGLvXudHKLBnhIObGSDcO+C+C1rax683PBRnK+ZjBO/S4suJEeK41la/1blYAWJKSTT119PK9a1qKupm7bIsSbjIpzUXpaNKiG4vEauKR3kof7vCKS5JINsqzk6NLyZectxOPTOOOwtQzK1Holj/T4sPICPT0HIWjmT35eZpwFa0odPhseDMKMPiqqgf4cb9FMPx1DGcDKHkSH9fw/0b4glP9dpMW1fklNqklg7Z273Bz0FZhKd4=

python:
  - 3.9
  - 3.8
  - 3.7
  - 3.6
  - 3.10-dev
  - nightly

jobs:
  allow_failures:
    - python: 3.10-dev
    - python: nightly

before_install:
  - pip install -U pip

install:
  - pip install -r requirements.txt

script:
  - sh unittest.sh

deploy:
  provider: pypi
  username: "$PYPI_USERNAME"
  password: "$PYPI_PASSWORD"
  skip_existing: true
  on:
    tags: true
    python: 3.9